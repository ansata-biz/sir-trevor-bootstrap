/*! sir-trevor-bootstrap 2014-04-16 */
(function(){var a;a='<div class="panel panel-default"> <div class="panel-heading"> <div class="buttons"> <button type="button" class="close">&times;</button> <button type="button" class="reorder"><i class="st-icon st-icon-move"></i></button> </div> <h4 class="panel-title"> <a data-toggle="collapse" contenteditable="true" class="st-text-block"> Panel Heading </a> </h4> </div> <div class="panel-collapse collapse in"> <div class="panel-body st-text-block" contenteditable="true"> Panel body </div> </div> </div>',SirTrevor.Blocks.Accordion=SirTrevor.Block.extend({type:"accordion",title:"Accordion",editorHTML:'<div class="panel-container"><div class="panel-group"></div></div>',icon_name:"accordion",controllable:!0,constructor:function(){return this.controls={add:this.addPanel},SirTrevor.Block.apply(this,arguments)},addPanel:function(){return this.$(".panel-group").append(a),this._initTextBlocks()},onBlockRender:function(){return 0===this.$(".panel-group").children(".panel").length&&(this.$(".panel-group").append(a),this._initTextBlocks(!0)),this.$(".panel-group").on("click","button.close",function(){return confirm("Are you sure you want to remove this panel?")?$(this).closest(".panel").trigger("destroy").remove():void 0}),new Sortable(this.$(".panel-group")[0],{handle:".reorder",draggable:".panel"})},toData:function(){var a;return a={panels:[]},this.$(".panel").each(function(){return a.panels.push({title:$(this).find(".panel-title > a").html(),body:$(this).find(".panel-body").html()})}),this.setData(a)},loadData:function(b){var c,d,e,f,g,h;if("undefined"!=typeof b){for(this.$(".panel").remove(),g=b.panels,h=[],e=0,f=g.length;f>e;e++)d=g[e],c=$(a),c.find(".panel-title > a").html(d.title),c.find(".panel-body").html(d.body),h.push(this.$(".panel-group").append(c));return h}}})}).call(this),function(){var a,b={}.hasOwnProperty;a='<span class="btn btn-default st-required" contenteditable="true">Button</span>',SirTrevor.Blocks.Button=SirTrevor.Block.extend({button_sizes:{"btn-xs":"X-Small","btn-sm":"Small","":"Default","btn-lg":"Large"},button_styles:{"btn-default":"Default","btn-primary":"Primary","btn-success":"Success","btn-info":"Info","btn-warning":"Warning","btn-danger":"Danger"},type:"button",title:"Button",editorHTML:'<div class="st-button-form-wrapper form-inline well" style="margin: 10px; display: none;"> <div class="form-group"> Size: <select name="size"></select> </div> <div class="form-group"> Style: <select name="style"></select> </div> <div class="form-group"> Full width: <input type="checkbox" name="is_block"/> </div> <div class="form-group"> URL: <input type="text" name="url" value=""/> </div> <button type="button">OK</button> </div> <div class="st-button-wrapper" style="text-align: center; min-height: 0">'+a+"</div>",icon_name:"button",loadData:function(a){return this.$find(".btn").html(SirTrevor.toHTML(a.text,this.type))},_setBlockInner:function(){var a,c,d,e,f,g,h,i;SirTrevor.Block.prototype._setBlockInner.apply(this,arguments),c=this.$("[name=style]"),h=this.button_styles;for(g in h)b.call(h,g)&&(f=h[g],c.append($("<option/>").attr("value",g).text(f)));c.val("btn-default"),a=this.$("[name=size]"),i=this.button_sizes;for(e in i)b.call(i,e)&&(d=i[e],a.append($("<option/>").attr("value",e).text(d)));return a.val(""),a.on("change click",function(c){return function(){var d,f,g,h;f=a.val(),d=c.getButton(),g=c.button_sizes,h=[];for(e in g)b.call(g,e)&&h.push(d.toggleClass(e,e===f));return h}}(this))},onBlockRender:function(){var a,c,d;return this.getWrapper().on("click keyup",function(a){return function(){return a.checkForButton()}}(this)),this.getButton().on("click",function(a){return function(){return a.$(".st-button-form-wrapper").show("fast")}}(this)),this.$(".st-button-form-wrapper button").on("click",function(a){return function(){return a.$(".st-button-form-wrapper").hide("fast")}}(this)),d=this.$("[name=style]"),d.on("change click",function(a){return function(){var c,e,f,g,h;e=d.val(),c=a.getButton(),g=a.button_styles,h=[];for(f in g)b.call(g,f)&&h.push(c.toggleClass(f,f===e));return h}}(this)),d.trigger("change"),c=this.$("[name=size]"),c.on("change click",function(a){return function(){var d,e,f,g,h;e=c.val(),d=a.getButton(),g=a.button_sizes,h=[];for(f in g)b.call(g,f)&&h.push(d.toggleClass(f,f===e));return h}}(this)),c.trigger("change"),a=this.$("[name=is_block]").on("change click",function(b){return function(){return b.getButton().toggleClass("btn-block",a.is(":checked"))}}(this)),a.trigger("change")},checkForButton:function(){return 0===this.$(".btn").length?setTimeout(function(b){return function(){return 0===b.$(".btn").length?b.getWrapper().html(a):void 0}}(this),500):void 0},getWrapper:function(){return this.$(".st-button-wrapper")},getButton:function(){return this.$(".st-button-wrapper .btn")},toData:function(){var a;return a={},this.$("select, input").each(function(){var b;return b="checkbox"===this.getAttribute("type")?$(this).is(":checked"):$(this).val(),a[this.getAttribute("name")]=b,!0}),a.html=this.getButton().html(),this.setData(a)},loadData:function(a){var c,d,e;for(d in a)b.call(a,d)&&(e=a[d],c=this.$("select, input").filter("[name="+d+"]"),"checkbox"===c.attr("type")?e&&c.attr("checked","yes"):c.val(e));return this.getButton().html(a.html)}})}.call(this);